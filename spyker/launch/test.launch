<?xml version="1.0"?>
<launch>

 <!-- arguments -->
    <arg name="saved_map" default="false"/>
    <arg name="odom_topic" default="zed2/zed_node/odom"/>
<!-- Run rosserial -->
    <!--<node name="serial_node" pkg="rosserial_arduino" type="serial_node.py" args="/dev/ttyUSB1"/>-->
 <!--  ****** rosserial *****  -->
     <node pkg="rosserial_python" type="serial_node.py" name="serial_node">
     <param name="port" value="/dev/Spyker_Interface_Port"/>
     <param name="baud" value="57600"/>
     </node>
    
<!-- rplidar node and mapping -->
    <!--<include file="$(find rplidar_ros)/launch/rplidar_a3.launch"/>-->
    <!-- *************** RPLidar A3 ********************  -->
    <node name="rplidarNode"          pkg="rplidar_ros"  type="rplidarNode" output="screen">
    <param name="serial_port"         type="string" value="/dev/RPLidar_Port"/>  
    <param name="serial_baudrate"     type="int"    value="256000"/><!--A3 -->
    <param name="frame_id"            type="string" value="laser"/>
    <param name="inverted"            type="bool"   value="false"/>
    <param name="angle_compensate"    type="bool"   value="true"/>
    <param name="scan_mode"           type="string" value="Sensitivity"/>
    </node>
   <!-- <include file="$(find sick_scan)/launch/sick_lms_5xx.launch"/>-->
    <include file="$(find hector_mapping)/launch/mapping_default.launch"/>

    
<!--ZED2 nodes -->
   <!--  <include file="$(find zed_wrapper)/launch/zed2.launch"/>
     <node name="zed_sensors" pkg="zed_sensors" type="zed_sensors"/> -->
    
<!-- only needed if using premade map -->
    <group if="$(arg saved_map)">
        <!--- Run AMCL --> 
        <include file="$(find amcl)/examples/amcl_omni.launch" />
        <param name="odom_frame_id" value="zed2/zed_node/odom"/>
    </group>
    
    
 <!-- Run the map server -->
    <node name="map_server" pkg="map_server" type="map_server" args="$(find spyker)/map.yaml"/>
	<param name="frame_id" value="/map"/>
	
    
 <!-- Run move_base -->
    <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find spyker)/params/costmap_common_params.yaml" command="load" ns="global_costmap" /> 
    <rosparam file="$(find spyker)/params/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find spyker)/params/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find spyker)/params/global_costmap_params.yaml" command="load" /> 
    <!-- <rosparam file="$(find spyker)/params/base_local_planner_params.yaml" command="load" /> -->
    <rosparam file="$(find spyker)/params/move_base_params.yaml" command="load" />
    <rosparam file="$(find spyker)/params/dwa_local_planner_params.yaml" command="load" />
  
    <!-- <remap from="odom" to="$(arg odom_topic)" /> -->
 </node>


</launch> 
 
